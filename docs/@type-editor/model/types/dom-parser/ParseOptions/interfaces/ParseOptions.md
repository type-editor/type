[**Type Editor**](../../../../../../README.md)

---

[Type Editor](../../../../../../index.md) / [@type-editor/model](../../../../README.md) / [types/dom-parser/ParseOptions](../README.md) / ParseOptions

# Interface: ParseOptions

Defined in: [packages/model/src/types/dom-parser/ParseOptions.ts:20](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L20)

Configuration options recognized by the DOM parser's parse and parseSlice methods.
These options control how DOM content is converted into ProseMirror document structure.

## Example

```typescript
const options: ParseOptions = {
  preserveWhitespace: "full",
  from: 0,
  to: 5,
  findPositions: [{ node: someNode, offset: 10 }],
};
```

## Properties

| Property                                                       | Type                                                                                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Defined in                                                                                                                                                                                            |
| -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="property-context"></a> `context?`                       | [`ResolvedPos`](../../../../elements/ResolvedPos/classes/ResolvedPos.md)                           | Additional ancestor context for parsing. **Remarks** Provides a set of ancestor nodes to consider as context when evaluating parse rules, in addition to the top node. This affects how context-sensitive parse rules are matched (rules with a "context" property). The context is specified as a resolved position, which includes the full ancestor chain at that position in the document. **Example** `// Parse with knowledge of surrounding document structure const $pos = doc.resolve(10); // Position in existing document parser.parseSlice(dom, { context: $pos })`                                                                                                                    | [packages/model/src/types/dom-parser/ParseOptions.ts:154](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L154) |
| <a id="property-findpositions"></a> `findPositions?`           | \{ `node`: `Node`; `offset`: `number`; `pos?`: `number`; \}[]                                      | Array of DOM positions to track during parsing. **Remarks** Allows tracking how DOM positions map to document positions during parsing. The parser will add a `pos` property to each object containing the corresponding document position after parsing. DOM positions not found in the parsed content will remain unchanged (pos will be undefined). This is useful for maintaining cursor positions or tracking specific DOM locations through the parsing process. **Example** `const positions = [ { node: textNode, offset: 5 }, { node: elementNode, offset: 0 } ]; parser.parse(dom, { findPositions: positions }); // After parsing, positions[0].pos will contain the document position` | [packages/model/src/types/dom-parser/ParseOptions.ts:67](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L67)   |
| <a id="property-from"></a> `from?`                             | `number`                                                                                           | The child node index to start parsing from (inclusive). **Remarks** When specified, parsing will begin at this child index instead of the first child. If not specified, parsing starts from the first child node (index 0). Useful for parsing only a portion of a DOM element's children. **Example** `// Parse only children from index 2 onwards parser.parse(dom, { from: 2 })`                                                                                                                                                                                                                                                                                                               | [packages/model/src/types/dom-parser/ParseOptions.ts:83](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L83)   |
| <a id="property-preservewhitespace"></a> `preserveWhitespace?` | `boolean` \| `"full"`                                                                              | Controls whitespace handling during parsing. **Remarks** Determines how whitespace characters (spaces, tabs, newlines) are processed: - `false` or `undefined`: Whitespace is collapsed according to HTML rules (multiple spaces become one) - `true`: Whitespace is preserved, but newlines are normalized to spaces or line break replacements - `'full'`: All whitespace is preserved entirely, including newlines (useful for code blocks) **Example** `// HTML whitespace collapsing (default) preserveWhitespace: false // Preserve spaces, normalize newlines preserveWhitespace: true // Preserve everything (for <pre> blocks) preserveWhitespace: 'full'`                                | [packages/model/src/types/dom-parser/ParseOptions.ts:43](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L43)   |
| <a id="property-rulefromnode"></a> `ruleFromNode?`             | (`node`) => `Omit`&lt;[`TagParseRule`](../../TagParseRule/interfaces/TagParseRule.md), `"tag"`&gt; | Custom function to generate parse rules for specific DOM nodes. **Remarks** This function is called for each DOM element during parsing, before checking the parser's standard rules. It allows dynamic rule generation based on DOM element properties, attributes, or other runtime conditions. Return null to fall back to standard rule matching. **Example** `ruleFromNode: (node) => { if (node.getAttribute('data-custom') === 'special') { return { node: 'custom_node', attrs: { id: node.id } }; } return null; // Use standard rules }`                                                                                                                                                 | [packages/model/src/types/dom-parser/ParseOptions.ts:179](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L179) |
| <a id="property-to"></a> `to?`                                 | `number`                                                                                           | The child node index to stop parsing at (exclusive). **Remarks** When specified, parsing will stop before this child index. If not specified, parsing continues through the last child node. Combined with `from`, allows parsing a specific range of children. **Example** `// Parse children from index 1 to 4 (indices 1, 2, 3) parser.parse(dom, { from: 1, to: 4 })`                                                                                                                                                                                                                                                                                                                          | [packages/model/src/types/dom-parser/ParseOptions.ts:99](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L99)   |
| <a id="property-topmatch"></a> `topMatch?`                     | [`ContentMatch`](../../../content-parser/ContentMatch/interfaces/ContentMatch.md)                  | The starting content match for validating parsed content against the top node. **Remarks** This determines what content is allowed in the top node at the start of parsing. By default, uses the topNode's contentMatch. This option allows starting from a different match state, useful when continuing to parse into existing content. **Example** `// Start matching after some existing content const existingContent = Fragment.from(someNodes); const match = topNode.type.contentMatch.matchFragment(existingContent); parser.parse(dom, { topNode, topMatch: match })`                                                                                                                    | [packages/model/src/types/dom-parser/ParseOptions.ts:134](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L134) |
| <a id="property-topnode"></a> `topNode?`                       | [`Node`](../../../../elements/Node/classes/Node.md)                                                | The node to use as the top-level container for parsed content. **Remarks** By default, content is parsed into the schema's topNodeType (usually "doc"). This option allows using a different node type and attributes as the container, which is useful when parsing into a specific context or creating fragments. **Example** `// Parse into a blockquote instead of doc const blockquote = schema.nodes.blockquote.create(); parser.parse(dom, { topNode: blockquote })`                                                                                                                                                                                                                        | [packages/model/src/types/dom-parser/ParseOptions.ts:116](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L116) |
| <a id="property-topopen"></a> `topOpen?`                       | `boolean`                                                                                          | Whether the top node should be left open after parsing. **Remarks** When true, the top node won't be automatically closed and filled with required content at the end of parsing. This allows additional content to be added later, which is useful when parsing incrementally or creating partial document structures. When false (default), the parser ensures all required trailing content is added according to the schema's content expressions. **Example** `// Parse into an open document that can be extended const slice = parser.parseSlice(dom, { topOpen: true });`                                                                                                                  | [packages/model/src/types/dom-parser/ParseOptions.ts:198](https://github.com/type-editor/type/blob/29c0b7ebbb68b1528c0edc5e9973c4538cccdb64/packages/model/src/types/dom-parser/ParseOptions.ts#L198) |
