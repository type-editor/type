import{_ as i,o as a,c as e,ak as t}from"./chunks/framework.EVMbD_FN.js";const c=JSON.parse('{"title":"@type-editor/gapcursor","description":"","frontmatter":{},"headers":[],"relativePath":"@type-editor/gapcursor/README.md","filePath":"@type-editor/gapcursor/README.md"}'),n={name:"@type-editor/gapcursor/README.md"};function r(l,s,o,p,h,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<p><a href="./../../README.html"><strong>Type Editor</strong></a></p><hr><p><a href="./../../">Type Editor</a> / @type-editor/gapcursor</p><h1 id="type-editor-gapcursor" tabindex="-1">@type-editor/gapcursor <a class="header-anchor" href="#type-editor-gapcursor" aria-label="Permalink to “@type-editor/gapcursor”">​</a></h1><p>This is a refactored version of the <a href="https://github.com/ProseMirror/prosemirror-gapcursor" target="_blank" rel="noreferrer">prosemirror-gapcursor</a> module.</p><p>This module implements a gap cursor plugin for Type Editor. A gap cursor is a block-level cursor that can be used to focus positions that don&#39;t allow regular selection (such as positions that have a leaf block node, table, or the end of the document both before and after them).</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to “Installation”">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @type-editor/gapcursor</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to “Usage”">​</a></h2><h3 id="basic-setup" tabindex="-1">Basic Setup <a class="header-anchor" href="#basic-setup" aria-label="Permalink to “Basic Setup”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { gapCursor } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/gapcursor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { EditorState } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EditorState.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... your schema and doc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    gapCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... other plugins</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="styling" tabindex="-1">Styling <a class="header-anchor" href="#styling" aria-label="Permalink to “Styling”">​</a></h3><p>You&#39;ll need to include the gap cursor styles for the cursor to be visible. Import the CSS file from the package:</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/gapcursor/style/gapcursor.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Or include it in your bundler configuration. The gap cursor is rendered as a short, blinking horizontal stripe with the class <code>ProseMirror-gapcursor</code>.</p><p>You can also define your own styles for the <code>.ProseMirror-gapcursor</code> class.</p><h2 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-label="Permalink to “Documentation”">​</a></h2><h3 id="gapcursor" tabindex="-1">gapCursor <a class="header-anchor" href="#gapcursor" aria-label="Permalink to “gapCursor”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gapCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Creates a gap cursor plugin for the editor.</p><p>When enabled, this plugin will:</p><ul><li>Capture clicks near positions that don&#39;t have a normally selectable position</li><li>Handle arrow key navigation to move into/out of gap cursor positions</li><li>Create gap cursor selections for valid positions</li><li>Handle composition input to avoid IME conflicts</li><li>Render the gap cursor with the <code>ProseMirror-gapcursor</code> CSS class</li></ul><p><strong>Returns:</strong> A configured <code>Plugin</code> instance.</p><hr><h3 id="gapcursor-1" tabindex="-1">GapCursor <a class="header-anchor" href="#gapcursor-1" aria-label="Permalink to “GapCursor”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GapCursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Selection</span></span></code></pre></div><p>Represents a gap cursor selection - a cursor positioned between block nodes where regular text selection is not possible.</p><p>Gap cursors are used in positions where the document structure doesn&#39;t allow normal text cursors, such as between two adjacent block nodes (e.g., between two code blocks or between a heading and an image).</p><p>Both <code>$anchor</code> and <code>$head</code> properties point at the same cursor position since gap cursors don&#39;t represent a range but a single point between nodes.</p><h4 id="constructor" tabindex="-1">Constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to “Constructor”">​</a></h4><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($pos: ResolvedPos)</span></span></code></pre></div><p>Creates a new gap cursor at the given position.</p><ul><li><strong><code>$pos</code></strong>: The resolved position where the gap cursor should be placed. Both anchor and head will be set to this position.</li></ul><h4 id="static-methods" tabindex="-1">Static Methods <a class="header-anchor" href="#static-methods" aria-label="Permalink to “Static Methods”">​</a></h4><h5 id="gapcursor-valid" tabindex="-1"><code>GapCursor.valid</code> <a class="header-anchor" href="#gapcursor-valid" aria-label="Permalink to “GapCursor.valid”">​</a></h5><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">static </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($pos: ResolvedPos): boolean</span></span></code></pre></div><p>Checks whether a gap cursor is valid at the given position.</p><p>A gap cursor is valid when:</p><ol><li>The parent is not a text block (gap cursors can&#39;t exist within text)</li><li>There&#39;s a &quot;closed&quot; node before the position (block or atom node)</li><li>There&#39;s a &quot;closed&quot; node after the position (block or atom node)</li><li>The parent allows gap cursors (via <code>allowGapCursor</code> spec or default content type)</li></ol><ul><li><strong><code>$pos</code></strong>: The resolved position to check.</li><li><strong>Returns:</strong> <code>true</code> if a gap cursor can be placed at this position, <code>false</code> otherwise.</li></ul><h5 id="gapcursor-findgapcursorfrom" tabindex="-1"><code>GapCursor.findGapCursorFrom</code> <a class="header-anchor" href="#gapcursor-findgapcursorfrom" aria-label="Permalink to “GapCursor.findGapCursorFrom”">​</a></h5><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">static </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findGapCursorFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($pos: ResolvedPos, dir: number, mustMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> boolean): ResolvedPos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span></code></pre></div><p>Searches for a valid gap cursor position starting from the given position.</p><p>This method performs a depth-first search through the document tree to find the nearest valid gap cursor position in the specified direction.</p><ul><li><strong><code>$pos</code></strong>: The starting resolved position for the search.</li><li><strong><code>dir</code></strong>: The search direction: positive values move forward, negative values move backward.</li><li><strong><code>mustMove</code></strong>: If <code>true</code>, the search will not return the starting position even if valid. Defaults to <code>false</code>.</li><li><strong>Returns:</strong> The resolved position of a valid gap cursor, or <code>null</code> if none is found.</li></ul><p><strong>Example:</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find the next gap cursor position moving forward</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nextGap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GapCursor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findGapCursorFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($currentPos, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h5 id="gapcursor-fromjson" tabindex="-1"><code>GapCursor.fromJSON</code> <a class="header-anchor" href="#gapcursor-fromjson" aria-label="Permalink to “GapCursor.fromJSON”">​</a></h5><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">static </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(doc: Node, json: SelectionJSON): GapCursor</span></span></code></pre></div><p>Deserializes a gap cursor from its JSON representation.</p><ul><li><strong><code>doc</code></strong>: The document to resolve the position in.</li><li><strong><code>json</code></strong>: The serialized gap cursor data containing the position.</li><li><strong>Returns:</strong> A new <code>GapCursor</code> instance at the deserialized position.</li><li><strong>Throws:</strong> <code>RangeError</code> if the JSON doesn&#39;t contain a valid numeric position.</li></ul><h2 id="customizing-gap-cursor-behavior" tabindex="-1">Customizing Gap Cursor Behavior <a class="header-anchor" href="#customizing-gap-cursor-behavior" aria-label="Permalink to “Customizing Gap Cursor Behavior”">​</a></h2><h3 id="allowgapcursor-node-spec-property" tabindex="-1"><code>allowGapCursor</code> Node Spec Property <a class="header-anchor" href="#allowgapcursor-node-spec-property" aria-label="Permalink to “allowGapCursor Node Spec Property”">​</a></h3><p>By default, gap cursors are only allowed in places where the default content node (in the schema content constraints) is a textblock node. You can customize this by adding an <code>allowGapCursor</code> property to your node specs:</p><ul><li>If set to <code>true</code>, gap cursors are allowed everywhere in that node.</li><li>If set to <code>false</code>, gap cursors are never allowed in that node.</li></ul><p><strong>Example:</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nodes: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... other nodes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    code_block: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      marks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      group: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;block&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      code: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      defining: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      allowGapCursor: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Allow gap cursors around code blocks</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ... other specs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      inline: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      attrs: { src: {} },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      group: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      draggable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      allowGapCursor: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Never allow gap cursors around images</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ... other specs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="creategapcursor-node-spec-property" tabindex="-1"><code>createGapCursor</code> Node Spec Property <a class="header-anchor" href="#creategapcursor-node-spec-property" aria-label="Permalink to “createGapCursor Node Spec Property”">​</a></h3><p>By default, leaf blocks and isolating nodes will allow gap cursors to appear next to them. You can add a <code>createGapCursor: true</code> property to a block node&#39;s spec to make gap cursors appear next to other nodes as well.</p><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to “License”">​</a></h2><p>MIT</p><h2 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-label="Permalink to “Modules”">​</a></h2><table><thead><tr><th>Module</th><th>Description</th></tr></thead><tbody><tr><td><p><a href="./gap-cursor-plugin/README.html">gap-cursor-plugin</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./GapCursor/README.html">GapCursor</a></p></td><td><p>‐</p></td></tr></tbody></table>`,63)])])}const g=i(n,[["render",r]]);export{c as __pageData,g as default};
