import{_ as e,o as a,c as r,ak as i}from"./chunks/framework.EVMbD_FN.js";const u=JSON.parse('{"title":"@type-editor/input","description":"","frontmatter":{},"headers":[],"relativePath":"@type-editor/input/README.md","filePath":"@type-editor/input/README.md"}'),d={name:"@type-editor/input/README.md"};function p(n,t,s,l,o,h){return a(),r("div",null,[...t[0]||(t[0]=[i(`<p><a href="./../../README.html"><strong>Type Editor</strong></a></p><hr><p><a href="./../../">Type Editor</a> / @type-editor/input</p><h1 id="type-editor-input" tabindex="-1">@type-editor/input <a class="header-anchor" href="#type-editor-input" aria-label="Permalink to “@type-editor/input”">​</a></h1><p>This is a refactored version of the input handling logic from <a href="https://github.com/ProseMirror/prosemirror-view" target="_blank" rel="noreferrer">prosemirror-view</a>.</p><p>This module provides input handling functionality for the Type Editor. It handles all user interactions including keyboard input, mouse events, clipboard operations, drag-and-drop, touch events, and composition (IME) input.</p><h2 id="input-state" tabindex="-1">Input State <a class="header-anchor" href="#input-state" aria-label="Permalink to “Input State”">​</a></h2><p>The <code>InputState</code> class tracks the current input state of the editor, including keyboard modifier keys, mouse state, composition events, and selection state. It registers and manages all event handlers for the editor.</p><h2 id="clipboard-operations" tabindex="-1">Clipboard Operations <a class="header-anchor" href="#clipboard-operations" aria-label="Permalink to “Clipboard Operations”">​</a></h2><p>Functions for serializing and parsing content to and from the clipboard. This enables copy, cut, and paste operations while preserving document structure.</p><h3 id="serializeforclipboard" tabindex="-1">serializeForClipboard <a class="header-anchor" href="#serializeforclipboard" aria-label="Permalink to “serializeForClipboard”">​</a></h3><p>Serializes a slice of document content for placing on the clipboard. Produces a DOM fragment, plain-text representation, and the (possibly normalized) slice.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { serializeForClipboard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> serializeForClipboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view, slice);</span></span></code></pre></div><h3 id="dopaste" tabindex="-1">doPaste <a class="header-anchor" href="#dopaste" aria-label="Permalink to “doPaste”">​</a></h3><p>Processes pasted content by parsing it and inserting it into the editor. Delegates to the <code>handlePaste</code> prop if available, otherwise inserts the content directly.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { doPaste } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doPaste</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view, text, html, preferPlain, event);</span></span></code></pre></div><h2 id="drag-and-drop" tabindex="-1">Drag and Drop <a class="header-anchor" href="#drag-and-drop" aria-label="Permalink to “Drag and Drop”">​</a></h2><p>The <code>Dragging</code> class represents an active drag operation, storing information about what content is being dragged and whether it&#39;s a move or copy operation.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Dragging } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dragging</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dragging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(slice, isMove, nodeSelection);</span></span></code></pre></div><h2 id="composition-handling" tabindex="-1">Composition Handling <a class="header-anchor" href="#composition-handling" aria-label="Permalink to “Composition Handling”">​</a></h2><p>Utilities for managing IME (Input Method Editor) composition state, which is crucial for proper handling of complex scripts like CJK (Chinese, Japanese, Korean) input.</p><h3 id="clearcomposition" tabindex="-1">clearComposition <a class="header-anchor" href="#clearcomposition" aria-label="Permalink to “clearComposition”">​</a></h3><p>Clears the current composition state and marks affected DOM nodes as dirty so they will be re-rendered correctly.</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { clearComposition } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearComposition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view);</span></span></code></pre></div><h2 id="event-handlers" tabindex="-1">Event Handlers <a class="header-anchor" href="#event-handlers" aria-label="Permalink to “Event Handlers”">​</a></h2><p>The module includes handlers for various DOM events:</p><ul><li><strong>Keyboard</strong>: <code>keydown</code>, <code>keypress</code>, <code>keyup</code>, <code>compositionstart</code>, <code>compositionupdate</code>, <code>compositionend</code></li><li><strong>Mouse</strong>: <code>mousedown</code>, <code>contextmenu</code></li><li><strong>Touch</strong>: <code>touchstart</code>, <code>touchmove</code></li><li><strong>Clipboard</strong>: <code>copy</code>, <code>cut</code>, <code>paste</code></li><li><strong>Drag/Drop</strong>: <code>dragstart</code>, <code>dragend</code>, <code>dragover</code>, <code>dragenter</code>, <code>drop</code></li><li><strong>Focus</strong>: <code>focus</code>, <code>blur</code></li><li><strong>Input</strong>: <code>beforeinput</code></li></ul><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to “License”">​</a></h2><p>This project is licensed under the MIT License.</p><h2 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-label="Permalink to “Modules”">​</a></h2><table><thead><tr><th>Module</th><th>Description</th></tr></thead><tbody><tr><td><p><a href="./clipboard/parse-from-clipboard/README.html">clipboard/parse-from-clipboard</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/add-context/README.html">clipboard/parse/add-context</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/close-slice/README.html">clipboard/parse/close-slice</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/create-code-block-slice/README.html">clipboard/parse/create-code-block-slice</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/create-dom-from-plain-text/README.html">clipboard/parse/create-dom-from-plain-text</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/normalize-siblings/README.html">clipboard/parse/normalize-siblings</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/read-html/README.html">clipboard/parse/read-html</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/restore-replaced-spaces/README.html">clipboard/parse/restore-replaced-spaces</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/parse/unwrap-serialized-dom/README.html">clipboard/parse/unwrap-serialized-dom</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/serialize-for-clipboard/README.html">clipboard/serialize-for-clipboard</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/serialize/apply-required-wrappers/README.html">clipboard/serialize/apply-required-wrappers</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./clipboard/util/README.html">clipboard/util</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/before-input/before-input-handler/README.html">input-handler/before-input/before-input-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/compositon-constants/README.html">input-handler/compositon-constants</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/context-menu/context-menu-handler/README.html">input-handler/context-menu/context-menu-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/copy-paste/copy-handler/README.html">input-handler/copy-paste/copy-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/copy-paste/paste-handler/README.html">input-handler/copy-paste/paste-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/copy-paste/util/capture-paste/README.html">input-handler/copy-paste/util/capture-paste</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/copy-paste/util/do-paste/README.html">input-handler/copy-paste/util/do-paste</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/drag-end-handler/README.html">input-handler/drag-drop/drag-end-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/drag-over-enter-handler/README.html">input-handler/drag-drop/drag-over-enter-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/drag-start-handler/README.html">input-handler/drag-drop/drag-start-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/Dragging/README.html">input-handler/drag-drop/Dragging</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/drop-handler/README.html">input-handler/drag-drop/drop-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/drag-drop/util/drag-moves/README.html">input-handler/drag-drop/util/drag-moves</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/focus/blur-handler/README.html">input-handler/focus/blur-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/focus/focus-handler/README.html">input-handler/focus/focus-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/key-codes/README.html">input-handler/key-codes</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/browser-hacks/safari-down-arrow-bug/README.html">input-handler/keyboard/browser-hacks/safari-down-arrow-bug</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/composition-end-handler/README.html">input-handler/keyboard/composition-end-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/composition-start-update-handler/README.html">input-handler/keyboard/composition-start-update-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/key-down-handler/README.html">input-handler/keyboard/key-down-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/key-press-handler/README.html">input-handler/keyboard/key-press-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/key-up-handler/README.html">input-handler/keyboard/key-up-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-backspace-key/README.html">input-handler/keyboard/keys/is-backspace-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-delete-key/README.html">input-handler/keyboard/keys/is-delete-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-down-arrow-key/README.html">input-handler/keyboard/keys/is-down-arrow-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-formatting-shortcut/README.html">input-handler/keyboard/keys/is-formatting-shortcut</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-left-arrow-key/README.html">input-handler/keyboard/keys/is-left-arrow-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-right-arrow-key/README.html">input-handler/keyboard/keys/is-right-arrow-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/keys/is-up-arrow-key/README.html">input-handler/keyboard/keys/is-up-arrow-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/util/find-direction/README.html">input-handler/keyboard/util/find-direction</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/util/in-or-near-composition/README.html">input-handler/keyboard/util/in-or-near-composition</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/keyboard/util/schedule-compose-end/README.html">input-handler/keyboard/util/schedule-compose-end</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/mouse/mouse-down-handler/README.html">input-handler/mouse/mouse-down-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/mouse/MouseDown/README.html">input-handler/mouse/MouseDown</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/touch/touch-move-handler/README.html">input-handler/touch/touch-move-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/touch/touch-start-handler/README.html">input-handler/touch/touch-start-handler</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/broken-clipboard-api/README.html">input-handler/util/broken-clipboard-api</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/clear-composition/README.html">input-handler/util/clear-composition</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/end-composition/README.html">input-handler/util/end-composition</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/force-dom-flush/README.html">input-handler/util/force-dom-flush</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/get-text/README.html">input-handler/util/get-text</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/key-event/README.html">input-handler/util/key-event</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./input-handler/util/set-selection-origin/README.html">input-handler/util/set-selection-origin</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./InputState/README.html">InputState</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/clipboard/SerializationContext/README.html">types/clipboard/SerializationContext</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/clipboard/SerializedClipboard/README.html">types/clipboard/SerializedClipboard</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/clipboard/TrustedTypesPolicy/README.html">types/clipboard/TrustedTypesPolicy</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/input/EventHandler/README.html">types/input/EventHandler</a></p></td><td><p>‐</p></td></tr></tbody></table>`,31)])])}const k=e(d,[["render",p]]);export{u as __pageData,k as default};
