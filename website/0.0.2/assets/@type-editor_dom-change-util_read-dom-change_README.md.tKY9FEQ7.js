import{_ as a,o as t,c as i,ak as n}from"./chunks/framework.BhGvdB6H.js";const g=JSON.parse('{"title":"read-dom-change","description":"","frontmatter":{},"headers":[],"relativePath":"@type-editor/dom-change-util/read-dom-change/README.md","filePath":"@type-editor/dom-change-util/read-dom-change/README.md"}'),s={name:"@type-editor/dom-change-util/read-dom-change/README.md"};function r(o,e,l,d,h,c){return t(),i("div",null,[...e[0]||(e[0]=[n(`<p><a href="./../../../README.html"><strong>Type Editor</strong></a></p><hr><p><a href="./../../../">Type Editor</a> / <a href="./../README.html">@type-editor/dom-change-util</a> / read-dom-change</p><h1 id="read-dom-change" tabindex="-1">read-dom-change <a class="header-anchor" href="#read-dom-change" aria-label="Permalink to “read-dom-change”">​</a></h1><h2 id="remarks" tabindex="-1">Remarks <a class="header-anchor" href="#remarks" aria-label="Permalink to “Remarks”">​</a></h2><p>All referencing and parsing is done with the start-of-operation selection and document, since that&#39;s the one that the DOM represents. If any changes came in the meantime, the modification is mapped over those before it is applied.</p><h2 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to “Functions”">​</a></h2><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><p><a href="./functions/readDOMChange.html">readDOMChange</a></p></td><td><p>Reads and processes changes from the DOM, converting them into ProseMirror transactions.</p><p>This is the main entry point for handling DOM mutations and converting them into document updates. It orchestrates the entire DOM change detection and processing pipeline, including:</p><p><strong>Core Process:</strong></p><ol><li>Handles selection-only changes (when from &lt; 0)</li><li>Adjusts change range to block boundaries</li><li>Parses the changed DOM range into a ProseMirror document</li><li>Compares parsed content with current document to find differences</li><li>Applies various browser-specific adjustments</li><li>Creates and dispatches appropriate transactions</li></ol><p><strong>Special Handling:</strong></p><ul><li>Mobile Enter key detection (iOS/Android)</li><li>Type-over selection behavior</li><li>Mark-only changes (bold, italic, etc.)</li><li>Backspace/Enter key event delegation</li><li>Browser-specific quirks (Chrome, Safari, IE11, Android)</li><li>IME composition tracking</li></ul><p><strong>Transaction Types:</strong></p><ul><li>Selection updates (for selection-only changes)</li><li>Content replacements (for insertions/deletions)</li><li>Mark additions/removals (optimized path for styling changes)</li><li>Text insertions (with handleTextInput plugin support)</li></ul><p>The function ensures that all changes maintain document validity and properly handle edge cases across different browsers and input methods.</p><p><strong>See</strong></p><ul><li><a href="./../parse-change/parse-between/functions/parseBetween.html">parseBetween</a> for DOM parsing</li><li><a href="./../parse-change/find-diff/functions/findDiff.html">findDiff</a> for change detection</li><li><a href="./../parse-change/handle-selection-only-change/functions/handleSelectionOnlyChange.html">handleSelectionOnlyChange</a> for selection updates</li></ul><p><strong>Example</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Called by the DOM observer when mutations are detected</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">view.domObserver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flush</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// This internally calls readDOMChange</span></span></code></pre></div></td></tr></tbody></table>`,8)])])}const m=a(s,[["render",r]]);export{g as __pageData,m as default};
