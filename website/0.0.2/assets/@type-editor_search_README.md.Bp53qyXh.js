import{_ as a,o as i,c as t,ak as e}from"./chunks/framework.BhGvdB6H.js";const o=JSON.parse('{"title":"@type-editor/search","description":"","frontmatter":{},"headers":[],"relativePath":"@type-editor/search/README.md","filePath":"@type-editor/search/README.md"}'),n={name:"@type-editor/search/README.md"};function h(r,s,l,p,d,k){return i(),t("div",null,[...s[0]||(s[0]=[e(`<p><a href="./../../README.html"><strong>Type Editor</strong></a></p><hr><p><a href="./../../">Type Editor</a> / @type-editor/search</p><h1 id="type-editor-search" tabindex="-1">@type-editor/search <a class="header-anchor" href="#type-editor-search" aria-label="Permalink to “@type-editor/search”">​</a></h1><p>A refactored version of ProseMirror&#39;s <a href="https://github.com/ProseMirror/prosemirror-search" target="_blank" rel="noreferrer">prosemirror-search</a> module, providing search and replace functionality for rich text editors.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to “Installation”">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @type-editor/search</span></span></code></pre></div><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to “Overview”">​</a></h2><p>This module provides a comprehensive search and replace API for ProseMirror-based editors. It includes:</p><ul><li>A <strong>search plugin</strong> that manages search state and highlights matches</li><li>A <strong>SearchQuery</strong> class for defining search parameters (literal, regex, case-sensitive, whole-word)</li><li><strong>Commands</strong> for navigating between matches and performing replacements</li></ul><h3 id="styling" tabindex="-1">Styling <a class="header-anchor" href="#styling" aria-label="Permalink to “Styling”">​</a></h3><p>When using this module, you should either load the provided CSS file or define your own styles:</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Import the provided styles */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/search/style/search.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Or define your own */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.ProseMirror-search-match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#ffff0054</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.ProseMirror-active-search-match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#ff6a0054</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to “Usage”">​</a></h2><h3 id="basic-setup" tabindex="-1">Basic Setup <a class="header-anchor" href="#basic-setup" aria-label="Permalink to “Basic Setup”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  searchPlugin,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SearchQuery,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  findNext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  findPrev,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replaceNext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replaceAll,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { keymap } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/keymap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { EditorState } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EditorState.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  schema,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    searchPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    keymap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;Mod-f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: openSearchDialog, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Your custom handler</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      F3: findNext,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;Shift-F3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: findPrev,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="configuration-options" tabindex="-1">Configuration Options <a class="header-anchor" href="#configuration-options" aria-label="Permalink to “Configuration Options”">​</a></h3><p>The <code>searchPlugin()</code> function accepts an optional configuration object:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">searchPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initialQuery: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initialRange: { from: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, to: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Option</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>initialQuery</code></td><td><code>SearchQuery</code></td><td>The initial search query to use when the plugin is created</td></tr><tr><td><code>initialRange</code></td><td><code>{ from: number, to: number }</code></td><td>Optional range to limit the initial search scope</td></tr></tbody></table><h3 id="creating-a-search-query" tabindex="-1">Creating a Search Query <a class="header-anchor" href="#creating-a-search-query" aria-label="Permalink to “Creating a Search Query”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { SearchQuery } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Simple text search</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simpleQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Case-sensitive search</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> caseSensitiveQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  caseSensitive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Regular expression search</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> regexQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bword</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  regexp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Search and replace</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> replaceQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;old&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replace: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Whole word matching</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> wholeWordQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;the&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wholeWord: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Regex search with capture groups</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> captureQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">w+)@(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">w+)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  regexp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replace: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$2:$1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Swap the groups</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="searchquery-configuration" tabindex="-1">SearchQuery Configuration <a class="header-anchor" href="#searchquery-configuration" aria-label="Permalink to “SearchQuery Configuration”">​</a></h3><table tabindex="0"><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>search</code></td><td><code>string</code></td><td>(required)</td><td>The search string or regular expression pattern</td></tr><tr><td><code>caseSensitive</code></td><td><code>boolean</code></td><td><code>false</code></td><td>Whether the search should be case-sensitive</td></tr><tr><td><code>literal</code></td><td><code>boolean</code></td><td><code>false</code></td><td>When false, <code>\\n</code>, <code>\\r</code>, and <code>\\t</code> are replaced with their character equivalents</td></tr><tr><td><code>regexp</code></td><td><code>boolean</code></td><td><code>false</code></td><td>When true, interpret the search string as a regular expression</td></tr><tr><td><code>replace</code></td><td><code>string</code></td><td><code>&#39;&#39;</code></td><td>The replacement text (supports <code>$1</code>, <code>$&amp;</code> etc. for regex)</td></tr><tr><td><code>wholeWord</code></td><td><code>boolean</code></td><td><code>false</code></td><td>When true, only match whole words</td></tr><tr><td><code>filter</code></td><td><code>function</code></td><td><code>null</code></td><td>Optional filter to exclude certain results</td></tr></tbody></table><h3 id="updating-the-search-state" tabindex="-1">Updating the Search State <a class="header-anchor" href="#updating-the-search-state" aria-label="Permalink to “Updating the Search State”">​</a></h3><p>To update the search state after the plugin is initialized, you can dispatch a transaction with metadata:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { searchPlugin, SearchQuery } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create a new query and update via plugin key</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> newQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ search: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new search term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The plugin listens for metadata updates on the search plugin key</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// See the search-plugin-key module for advanced usage</span></span></code></pre></div><h2 id="commands" tabindex="-1">Commands <a class="header-anchor" href="#commands" aria-label="Permalink to “Commands”">​</a></h2><h3 id="find-commands" tabindex="-1">Find Commands <a class="header-anchor" href="#find-commands" aria-label="Permalink to “Find Commands”">​</a></h3><table tabindex="0"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>findNext</code></td><td>Find the next match after the current selection and move to it. Wraps around at the end.</td></tr><tr><td><code>findPrev</code></td><td>Find the previous match before the current selection and move to it. Wraps around at the start.</td></tr><tr><td><code>findNextNoWrap</code></td><td>Find the next match without wrapping at document/range end.</td></tr><tr><td><code>findPrevNoWrap</code></td><td>Find the previous match without wrapping at document/range start.</td></tr></tbody></table><h3 id="replace-commands" tabindex="-1">Replace Commands <a class="header-anchor" href="#replace-commands" aria-label="Permalink to “Replace Commands”">​</a></h3><table tabindex="0"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>replaceNext</code></td><td>Replace the current match and move to the next one, or select the next match if none is selected.</td></tr><tr><td><code>replaceNextNoWrap</code></td><td>Replace the next match without wrapping at document end.</td></tr><tr><td><code>replaceCurrent</code></td><td>Replace the currently selected match and keep it selected.</td></tr><tr><td><code>replaceAll</code></td><td>Replace all matches in the document or search range.</td></tr></tbody></table><h3 id="example-search-dialog-integration" tabindex="-1">Example: Search Dialog Integration <a class="header-anchor" href="#example-search-dialog-integration" aria-label="Permalink to “Example: Search Dialog Integration”">​</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  searchPlugin,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SearchQuery,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  findNext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  findPrev,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replaceNext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  replaceAll,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@type-editor/search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The search plugin manages state internally</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Use the provided commands to navigate and replace</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleFindNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  findNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view.state, view.dispatch);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleFindPrev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  findPrev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view.state, view.dispatch);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleReplaceAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  replaceAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(view.state, view.dispatch);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="searchquery-api" tabindex="-1">SearchQuery API <a class="header-anchor" href="#searchquery-api" aria-label="Permalink to “SearchQuery API”">​</a></h2><h3 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to “Properties”">​</a></h3><table tabindex="0"><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>search</code></td><td><code>string</code></td><td>The search string or pattern</td></tr><tr><td><code>caseSensitive</code></td><td><code>boolean</code></td><td>Whether the search is case-sensitive</td></tr><tr><td><code>valid</code></td><td><code>boolean</code></td><td>Whether the query is non-empty and syntactically valid</td></tr></tbody></table><h3 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to “Methods”">​</a></h3><table tabindex="0"><thead><tr><th>Method</th><th>Returns</th><th>Description</th></tr></thead><tbody><tr><td><code>eq(other)</code></td><td><code>boolean</code></td><td>Compare this query to another query</td></tr><tr><td><code>findNext(state, from?, to?)</code></td><td><code>SearchResult</code></td><td>Find the next occurrence in the given range</td></tr><tr><td><code>findPrev(state, from?, to?)</code></td><td><code>SearchResult</code></td><td>Find the previous occurrence in the given range</td></tr><tr><td><code>getReplacements(state, result)</code></td><td><code>Array</code></td><td>Get the replacement ranges for a search result</td></tr></tbody></table><h2 id="searchresult-interface" tabindex="-1">SearchResult Interface <a class="header-anchor" href="#searchresult-interface" aria-label="Permalink to “SearchResult Interface”">​</a></h2><p>When a match is found, it returns a <code>SearchResult</code> object:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Start position of the match</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// End position of the match</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  match</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExpMatchArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The regex match array (only for regex queries)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to “API Reference”">​</a></h2><h3 id="exports" tabindex="-1">Exports <a class="header-anchor" href="#exports" aria-label="Permalink to “Exports”">​</a></h3><table tabindex="0"><thead><tr><th>Export</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>searchPlugin</code></td><td><code>function</code></td><td>Creates the search plugin</td></tr><tr><td><code>search</code></td><td><code>function</code></td><td>Alias for <code>searchPlugin</code> (backward compatibility)</td></tr><tr><td><code>SearchQuery</code></td><td><code>class</code></td><td>Class for defining search parameters</td></tr><tr><td><code>findNext</code></td><td><code>Command</code></td><td>Find next match with wrap</td></tr><tr><td><code>findPrev</code></td><td><code>Command</code></td><td>Find previous match with wrap</td></tr><tr><td><code>findNextNoWrap</code></td><td><code>Command</code></td><td>Find next match without wrap</td></tr><tr><td><code>findPrevNoWrap</code></td><td><code>Command</code></td><td>Find previous match without wrap</td></tr><tr><td><code>replaceNext</code></td><td><code>Command</code></td><td>Replace current and find next</td></tr><tr><td><code>replaceNextNoWrap</code></td><td><code>Command</code></td><td>Replace next without wrap</td></tr><tr><td><code>replaceCurrent</code></td><td><code>Command</code></td><td>Replace current match</td></tr><tr><td><code>replaceAll</code></td><td><code>Command</code></td><td>Replace all matches</td></tr><tr><td><code>SearchResult</code></td><td><code>type</code></td><td>Interface for search match results</td></tr></tbody></table><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to “License”">​</a></h2><p>MIT</p><h2 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-label="Permalink to “Modules”">​</a></h2><table><thead><tr><th>Module</th><th>Description</th></tr></thead><tbody><tr><td><p><a href="./commands/find-next/README.html">commands/find-next</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/find-next-no-wrap/README.html">commands/find-next-no-wrap</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/find-prev/README.html">commands/find-prev</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/find-prev-no-wrap/README.html">commands/find-prev-no-wrap</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/replace-all/README.html">commands/replace-all</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/replace-current/README.html">commands/replace-current</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/replace-next/README.html">commands/replace-next</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/replace-next-no-wrap/README.html">commands/replace-next-no-wrap</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/util/apply-replacements/README.html">commands/util/apply-replacements</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/util/find-command/README.html">commands/util/find-command</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/util/next-match/README.html">commands/util/next-match</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/util/prev-match/README.html">commands/util/prev-match</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./commands/util/replace-command/README.html">commands/util/replace-command</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./get-match-highlights/README.html">get-match-highlights</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./get-search-state/README.html">get-search-state</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-plugin/README.html">search-plugin</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-plugin-key/README.html">search-plugin-key</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/AbstractQueryImpl/README.html">search-query/AbstractQueryImpl</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/NullQuery/README.html">search-query/NullQuery</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/QueryFactory/README.html">search-query/QueryFactory</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/regex-flags/README.html">search-query/regex-flags</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/RegExpQuery/README.html">search-query/RegExpQuery</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/scan-textblocks/README.html">search-query/scan-textblocks</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./search-query/StringQuery/README.html">search-query/StringQuery</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./SearchQuery/README.html">SearchQuery</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./SearchState/README.html">SearchState</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./set-search-state/README.html">set-search-state</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/DocumentRange/README.html">types/DocumentRange</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/QueryImpl/README.html">types/QueryImpl</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/ReplacementRange/README.html">types/ReplacementRange</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/SearchPluginOptions/README.html">types/SearchPluginOptions</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/SearchQueryConfig/README.html">types/SearchQueryConfig</a></p></td><td><p>‐</p></td></tr><tr><td><p><a href="./types/SearchResult/README.html">types/SearchResult</a></p></td><td><p>‐</p></td></tr></tbody></table>`,49)])])}const E=a(n,[["render",h]]);export{o as __pageData,E as default};
