import{b as t}from"./initial-content-DI8TmER9.js";class e{options;mark;view;inline;constructor(t){const{mark:e,view:o,inline:n,options:s}=t;this.mark=e,this.view=o,this.inline=n,this.options=s,this._dom=this.createElement(s.as),this._contentDOM=this.createElement(s.contentAs),this._dom.setAttribute("data-mark-view-root","true"),this._contentDOM.setAttribute("data-mark-view-content","true"),this._contentDOM.style.whiteSpace="inherit"}_contentDOM;get contentDOM(){return this._contentDOM}_dom;get dom(){return this._dom}get component(){return this.options.component}ignoreMutation(t){if(!this.dom||!this._contentDOM)return!0;let e;const o=this.options.ignoreMutation;return o&&(e=o(t)),"boolean"!=typeof e&&(e=this.shouldIgnoreMutation(t)),e}destroy(){this.options.destroy?.(),this._dom.remove(),this._contentDOM.remove()}shouldIgnoreMutation(t){return!this.dom||!this._contentDOM||"selection"!==t.type&&(this._contentDOM===t.target&&"attributes"===t.type||!this._contentDOM.contains(t.target))}createElement(e){const{inline:o,mark:n}=this;return t(e)?document.createElement(o?"span":"div"):e instanceof HTMLElement?e:"function"==typeof e?e(n):document.createElement(e)}}class o{getPosFunc;view;options;node;decorations;innerDecorations;selected=!1;_dom;_contentDOM;constructor(t){const{node:e,view:o,getPos:n,decorations:s,innerDecorations:i,options:r}=t;this.node=e,this.view=o,this.getPosFunc=n,this.decorations=s,this.innerDecorations=i,this.options=r,this._dom=this.createElement(r.as)??document.createElement("div"),e.isLeaf?this._contentDOM=null:"self"===r.contentAs?this._contentDOM=this._dom:this._contentDOM=this.createElement(r.contentAs),this._dom.setAttribute("data-node-view-root","true"),this._contentDOM&&this._contentDOM!==this._dom&&(this._contentDOM.setAttribute("data-node-view-content","true"),this._contentDOM.style.whiteSpace="inherit"),this.setSelection=r.setSelection,this.stopEvent=r.stopEvent}setSelection;stopEvent;get dom(){return this._dom}get contentDOM(){return this._contentDOM}get component(){return this.options.component}selectNode(){this.selected=!0,this.options.selectNode?.()}deselectNode(){this.selected=!1,this.options.deselectNode?.()}update(t,e,o){const n=this.options.update?.(t,e,o)??this.shouldUpdate(t);return this.node=t,this.decorations=e,this.innerDecorations=o,n&&this.options.onUpdate?.(),n}ignoreMutation(t){if(!this._dom||!this._contentDOM)return!0;let e;const o=this.options.ignoreMutation;return o&&(e=o(t)),"boolean"!=typeof e&&(e=this.shouldIgnoreMutation(t)),e}destroy(){this.options.destroy?.(),this._dom.remove(),this._contentDOM&&this._contentDOM!==this._dom&&this._contentDOM.remove()}getPos(){return this.getPosFunc()}shouldUpdate(t){return t.type===this.node.type}shouldIgnoreMutation(t){return!(this._dom&&this._contentDOM&&!this.node.isLeaf&&!this.node.isAtom&&("selection"===t.type||(this._contentDOM!==t.target||"attributes"!==t.type)&&this._contentDOM.contains(t.target)))}setAttrs(t){const e=this.getPos();"number"==typeof e&&this.view.dispatch(this.view.state.tr.setNodeMarkup(e,void 0,{...this.node.attrs,...t}))}createElement(e){const{node:o}=this;return t(e)?document.createElement(o.isInline?"span":"div"):e instanceof HTMLElement?e:"function"==typeof e?e(o):document.createElement(e)}}class n{view;prevState;options;constructor(t){this.view=t.view,this.options=t.options}get component(){return this.options.component}get root(){let t=this.options.root?.(this.view.dom);return t||(t=this.view.dom.parentElement??document.body),t}update(t,e){this.view=t,this.prevState=e,this.options.update?.(t,e)}destroy(){this.options.destroy?.()}}class s{view;options;_dom;_pos;getPosFunc;constructor(t){const{pos:e,spec:o,options:n}=t;this._pos=e,this.options=n,this._spec=o,this._dom=this.createElement(n.as),this._dom.setAttribute("data-widget-view-root","true")}_spec;get spec(){return this._spec}set spec(t){this._spec=t}get dom(){return this._dom}get pos(){return this._pos}get component(){return this.options.component}bind(t,e){this.view=t,this.getPosFunc=e}getPos(){return this.getPosFunc?.()}createElement(t){return t instanceof HTMLElement?t:document.createElement(t)}}export{e,n,o,s};
